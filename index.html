<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de RH - Performance Industrial</title>
    <!-- Tailwind CSS para estilização moderna -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js para os gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; background: radial-gradient(circle at center, rgba(81, 184, 234, 1) 0%, rgba(0, 0, 0, 1) 100%); }
        .chart-container { position: relative; width: 100%; height: 200px; }
        .model-chart-container { position: relative; width: 100%; height: 200px; }
        .vacation-chart-container { position: relative; width: 100%; height: 160px; }
        .card-shadow { box-shadow: 0 4px 12px rgba(0,0,0,0.03); }
        select { appearance: none; -webkit-appearance: none; }
        #selectionHighlight { transition: all 0.3s ease-in-out; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen p-4 md:p-8">

    <header class="max-w-7xl mx-auto mb-8">
        <div class="flex flex-col md:flex-row md:items-start justify-between gap-6">
            <div>
                <h1 class="text-3xl font-bold tracking-tight text-white uppercase">Feedback de Colaboradores</h1>
                <p class="text-gray-400 mt-1">Análise de Performance e Assiduidade • Dados atualizados a 30 de Janeiro</p>
            </div>
            
            <!-- ÁREA DE FILTROS -->
            <div class="flex flex-wrap gap-4 items-center bg-white p-4 rounded-2xl border border-slate-100 shadow-sm">
                
                <!-- Colaborador movido para a frente -->
                <div class="flex flex-col gap-1">
                    <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest px-1">Colaborador</label>
                    <div class="relative">
                        <select id="filterColaborador" class="pl-3 pr-8 py-2 bg-slate-50 border border-slate-200 rounded-lg text-xs font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[200px]">
                            <option value="">Selecionar Colaborador</option>
                            <optgroup label="SOLDADURA">
                                <option value="Abel dos Reis Tavares">Abel dos Reis Tavares</option>
                                <option value="Ilídio Costa Ferreira">Ilídio Costa Ferreira</option>
                                <option value="Octávio Ferreira da Silva">Octávio Ferreira da Silva</option>
                                <option value="Pedro Daniel Domingues Barreira">Pedro Daniel Domingues Barreira</option>
                            </optgroup>
                            <optgroup label="PÓS VENDA">
                                <option value="Alexandre Miguel Silva Nunes das Neves">Alexandre Miguel Silva Nunes das Neves</option>
                                <option value="Cândido Manuel dos Santos Veloso">Cândido Manuel dos Santos Veloso</option>
                                <option value="Carina Andreia Rocha Robaina">Carina Andreia Rocha Robaina</option>
                            </optgroup>
                            <optgroup label="MONTAGEM">
                                <option value="Carlos Miguel Tavares Almeida">Carlos Miguel Tavares Almeida</option>
                                <option value="Diogo Miguel Fernandez Martins">Diogo Miguel Fernandez Martins</option>
                                <option value="Fábio da Rocha Silva">Fábio da Rocha Silva</option>
                            </optgroup>
                        </select>
                        <i data-lucide="user" class="absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400 pointer-events-none"></i>
                    </div>
                </div>

                <div class="flex flex-col gap-1">
                    <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest px-1">Ano Base</label>
                    <div class="relative">
                        <select id="filterAnoBase" class="pl-3 pr-8 py-2 bg-slate-50 border border-slate-200 rounded-lg text-xs font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[90px]">
                            <option value="2025" selected>2025</option>
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                        </select>
                        <i data-lucide="calendar" class="absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400 pointer-events-none"></i>
                    </div>
                </div>

                <div class="flex flex-col gap-1">
                    <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest px-1">Comparar com</label>
                    <div class="relative">
                        <select id="filterAnoComp" class="pl-3 pr-8 py-2 bg-slate-50 border border-slate-200 rounded-lg text-xs font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[90px]">
                            <option value="2024" selected>2024</option>
                            <option value="2023">2023</option>
                        </select>
                        <i data-lucide="arrow-left-right" class="absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400 pointer-events-none"></i>
                    </div>
                </div>

                <div class="h-8 w-px bg-slate-100 hidden md:block"></div>

                <div class="flex flex-col gap-1">
                    <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest px-1">Setor</label>
                    <div class="relative">
                        <select id="filterSetor" class="pl-3 pr-8 py-2 bg-slate-50 border border-slate-200 rounded-lg text-xs font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[140px]">
                            <option value="">Média Geral</option>
                            <option value="ACABAMENTOS">ACABAMENTOS</option>
                            <option value="COMERCIAL">COMERCIAL</option>
                            <option value="COMPRAS">COMPRAS</option>
                            <option value="ENGENHARIA">ENGENHARIA</option>
                            <option value="FINANCEIRO">FINANCEIRO</option>
                            <option value="IOT">IOT</option>
                            <option value="LOGÍSTICA">LOGÍSTICA</option>
                            <option value="MONTAGEM">MONTAGEM</option>
                            <option value="PÓS VENDA">PÓS VENDA</option>
                            <option value="QUALIDADE">QUALIDADE</option>
                            <option value="SERRALHARIA">SERRALHARIA</option>
                            <option value="SOLDADURA">SOLDADURA</option>
                        </select>
                        <i data-lucide="chevron-down" class="absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400 pointer-events-none"></i>
                    </div>
                </div>

                <div class="flex gap-2 self-end">
                    <button id="btnReset" class="p-2 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg transition-colors shadow-sm" title="Limpar Filtros">
                        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Destaque de Seleção -->
        <div id="selectionHighlight" class="max-w-7xl mx-auto mb-8 hidden">
            <div class="bg-gradient-to-r from-indigo-700 to-indigo-900 rounded-[2rem] p-6 md:p-8 text-white shadow-2xl shadow-indigo-200">
                <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                    <div class="flex items-center gap-6">
                        <div class="w-20 h-20 bg-white/10 backdrop-blur-md rounded-2xl flex items-center justify-center border border-white/20">
                            <i data-lucide="user" id="highlightIcon" class="w-10 h-10 text-indigo-200"></i>
                        </div>
                        <div>
                            <span id="highlightSubtitle" class="text-[10px] font-black text-indigo-300 uppercase tracking-[0.2em] mb-1 block">Perfil em Análise</span>
                            <h2 id="highlightName" class="text-3xl font-black uppercase tracking-tight">NOME DO COLABORADOR</h2>
                            <div class="flex items-center gap-2 mt-2">
                                <span id="highlightSetorTag" class="px-2 py-0.5 bg-indigo-500/30 border border-indigo-400/30 rounded text-[10px] font-bold uppercase tracking-wider">SETOR</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 w-full md:w-auto">
                        <div class="bg-white/10 backdrop-blur-md p-4 rounded-2xl border border-white/10 min-w-[160px]">
                            <p class="text-[9px] font-black text-indigo-200 uppercase tracking-widest mb-1">Pontualidade</p>
                            <div class="flex items-baseline justify-between gap-4">
                                <span id="valPontDestaque" class="text-2xl font-black">--%</span>
                                <div class="flex flex-col items-end">
                                    <span id="diffPontDestaque" class="text-[9px] font-bold flex items-center gap-0.5">
                                        <i data-lucide="trending-up" class="w-2.5 h-2.5"></i> --%
                                    </span>
                                    <span id="labelComparePont" class="text-[8px] text-white/40 uppercase font-bold">vs. Média Geral</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white/10 backdrop-blur-md p-4 rounded-2xl border border-white/10 min-w-[160px]">
                            <p class="text-[9px] font-black text-indigo-200 uppercase tracking-widest mb-1">Assiduidade</p>
                            <div class="flex items-baseline justify-between gap-4">
                                <span id="valAssidDestaque" class="text-2xl font-black">--%</span>
                                <div class="flex flex-col items-end">
                                    <span id="diffAssidDestaque" class="text-[9px] font-bold flex items-center gap-0.5">
                                        <i data-lucide="trending-down" class="w-2.5 h-2.5"></i> --%
                                    </span>
                                    <span id="labelCompareAssid" class="text-[8px] text-white/40 uppercase font-bold">vs. Média Geral</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto space-y-6">
        <!-- KPIs Principais -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-white p-6 rounded-2xl border border-slate-100 card-shadow flex flex-col justify-between">
                <div class="flex justify-between items-start mb-4">
                    <div class="p-2 bg-slate-50 rounded-lg text-slate-600"><i data-lucide="clock" class="w-5 h-5"></i></div>
                    <div id="kpiPontTrend" class="flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold bg-emerald-100 text-emerald-600">
                        <i data-lucide="arrow-up-right" class="w-3.5 h-3.5"></i> 1.5% mais
                    </div>
                </div>
                <div>
                    <p class="text-sm text-slate-500 font-medium uppercase tracking-wider">Pontualidade</p>
                    <h3 id="kpiPontValue" class="text-2xl font-bold text-slate-900 mt-1">--%</h3>
                    <p class="text-xs text-slate-400 mt-1 italic label-ano-comp">vs. ano anterior</p>
                </div>
            </div>
            <div class="bg-white p-6 rounded-2xl border border-slate-100 card-shadow flex flex-col justify-between">
                <div class="flex justify-between items-start mb-4">
                    <div class="p-2 bg-slate-50 rounded-lg text-slate-600"><i data-lucide="user-check" class="w-5 h-5"></i></div>
                    <div id="kpiAssidTrend" class="flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold bg-rose-100 text-rose-600">
                        <i data-lucide="arrow-down-right" class="w-3.5 h-3.5"></i> 0.8% menos
                    </div>
                </div>
                <div>
                    <p class="text-sm text-slate-500 font-medium uppercase tracking-wider">Assiduidade</p>
                    <h3 id="kpiAssidValue" class="text-2xl font-bold text-slate-900 mt-1">--%</h3>
                    <p class="text-xs text-slate-400 mt-1 italic label-ano-comp">vs. ano anterior</p>
                </div>
            </div>
            <div class="bg-white p-6 rounded-2xl border border-slate-100 card-shadow flex flex-col justify-between">
                <div class="flex justify-between items-start mb-4">
                    <div class="p-2 bg-slate-50 rounded-lg text-slate-600"><i data-lucide="alert-circle" class="w-5 h-5"></i></div>
                    <div class="flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold bg-rose-100 text-rose-600">
                        <i data-lucide="arrow-up-right" class="w-3.5 h-3.5"></i> 2.0% mais
                    </div>
                </div>
                <div>
                    <p class="text-sm text-slate-500 font-medium uppercase tracking-wider">Faltas Registadas</p>
                    <h3 id="kpiFaltasValue" class="text-2xl font-bold text-slate-900 mt-1">-- dias</h3>
                    <p class="text-xs text-slate-400 mt-1 italic">Acumulado anual</p>
                </div>
            </div>
        </div>

        <!-- Gráficos de Assiduidade e Pontualidade -->
        <div class="bg-white p-6 rounded-2xl border border-slate-100 card-shadow w-full">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-2">
                    <i data-lucide="user-check" class="w-5 h-5 text-indigo-600"></i>
                    <h3 class="text-sm font-bold text-slate-800 tracking-tight uppercase">Assiduidade (%)</h3>
                </div>
                <div class="flex gap-3">
                    <span class="flex items-center gap-1 text-[9px] font-bold text-slate-400 uppercase"><span class="w-2 h-0.5 bg-slate-300 border-t border-dashed"></span> <span class="label-ano-comp-text">2024</span></span>
                    <span class="flex items-center gap-1 text-[9px] font-bold text-indigo-600 uppercase"><span class="w-2 h-0.5 bg-indigo-600"></span> <span class="label-ano-base-text">2025</span></span>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="assidChart"></canvas>
            </div>
        </div>

        <div class="bg-white p-6 rounded-2xl border border-slate-100 card-shadow w-full">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-2">
                    <i data-lucide="clock" class="w-5 h-5 text-emerald-600"></i>
                    <h3 class="text-sm font-bold text-slate-800 tracking-tight uppercase">Pontualidade (%)</h3>
                </div>
                <div class="flex gap-3">
                    <span class="flex items-center gap-1 text-[9px] font-bold text-slate-400 uppercase"><span class="w-2 h-0.5 bg-slate-300 border-t border-dashed"></span> <span class="label-ano-comp-text">2024</span></span>
                    <span class="flex items-center gap-1 text-[9px] font-bold text-emerald-600 uppercase"><span class="w-2 h-0.5 bg-emerald-600"></span> <span class="label-ano-base-text">2025</span></span>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="pontuChart"></canvas>
            </div>
        </div>

        <!-- Férias -->
        <div class="bg-white p-6 rounded-3xl border border-slate-100 card-shadow ring-4 ring-slate-50 w-full">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 items-center">
                <div class="space-y-4">
                    <div class="flex items-center gap-3">
                        <div class="p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100">
                            <i data-lucide="calendar" class="w-5 h-5"></i>
                        </div>
                        <h3 class="text-lg font-bold text-slate-900 uppercase">Gestão de Férias</h3>
                    </div>
                    <div class="bg-slate-900 rounded-2xl p-4 text-white">
                        <p class="text-[9px] text-slate-400 uppercase font-black tracking-widest mb-1">Total Disponível <span class="label-ano-base-text">2025</span></p>
                        <div class="flex items-baseline gap-2">
                            <span id="vacationTotal" class="text-3xl font-black">22</span>
                            <span class="text-[10px] text-indigo-400 font-bold uppercase italic">Dias</span>
                        </div>
                    </div>
                </div>
                <div class="md:col-span-2">
                    <div class="flex justify-between items-center mb-2">
                        <p class="text-[10px] text-slate-400 uppercase font-black tracking-widest">Dias Gozados (Mensal)</p>
                        <div class="flex gap-2">
                            <span class="flex items-center gap-1 text-[8px] font-bold text-slate-400 uppercase"><span class="w-2 h-0.5 bg-slate-300 border-t border-dashed"></span> <span class="label-ano-comp-text">2024</span></span>
                            <span class="flex items-center gap-1 text-[8px] font-bold text-indigo-600 uppercase"><span class="w-2 h-0.5 bg-indigo-600"></span> <span class="label-ano-base-text">2025</span></span>
                        </div>
                    </div>
                    <div class="vacation-chart-container">
                        <canvas id="vacationLineChart"></canvas>
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between mb-1"><span class="text-[9px] uppercase font-black text-slate-400">Consumido</span><span id="vacationPercentLabel" class="text-[10px] font-black">--%</span></div>
                        <div class="w-full bg-slate-100 h-2 rounded-full overflow-hidden"><div id="vacationBar" class="bg-indigo-600 h-full w-[0%] transition-all duration-500"></div></div>
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <div class="bg-slate-50 rounded-xl p-2 text-center border border-slate-100"><p class="text-[8px] text-slate-400 uppercase font-bold">A Agendar</p><p id="vacationPending" class="text-lg font-black text-slate-900">--</p></div>
                        <div class="bg-indigo-50 rounded-xl p-2 text-center border border-indigo-100"><p class="text-[8px] text-indigo-400 uppercase font-bold">Majoração</p><p id="vacationBonus" class="text-lg font-black text-indigo-600">+--</p></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Industrial -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="bg-white p-8 rounded-[2.5rem] border border-slate-100 card-shadow w-full">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="flex flex-col space-y-4">
                        <div class="inline-flex items-center gap-2 px-4 py-1.5 bg-indigo-50 text-indigo-700 rounded-full text-[10px] font-black uppercase tracking-widest self-start">
                            <i data-lucide="package" class="w-3.5 h-3.5"></i> Performance Industrial
                        </div>
                        <div>
                            <h3 class="text-3xl font-black text-slate-900 uppercase leading-none">Produção &<br/>Contribuição</h3>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-4 leading-relaxed max-w-[200px]">
                                Análise comparativa da eficiência de produção por período anual consolidado.
                            </p>
                        </div>
                    </div>
                    <div class="flex flex-col gap-4">
                        <div class="bg-slate-50 p-5 rounded-3xl border border-slate-100 flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div class="w-16 h-16 flex-shrink-0"><canvas id="prodChart"></canvas></div>
                                <div class="flex flex-col">
                                    <p class="text-[10px] font-black text-indigo-600 uppercase tracking-widest">Ano Base (<span class="label-ano-base-text">2025</span>)</p>
                                    <span id="prodCurrentVal" class="text-3xl font-black text-slate-900 leading-none">--%</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-slate-50/50 p-5 rounded-3xl border border-slate-100 flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div class="w-16 h-16 flex-shrink-0 opacity-40"><canvas id="prodChartPrev"></canvas></div>
                                <div class="flex flex-col">
                                    <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Ano Comparação (<span class="label-ano-comp-text">2024</span>)</p>
                                    <span id="prodPrevVal" class="text-2xl font-black text-slate-400 leading-none">--%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Justificação -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-2xl border border-slate-100 card-shadow">
                    <div class="flex items-center gap-2 mb-4">
                        <i data-lucide="pie-chart" class="w-5 h-5 text-indigo-600"></i>
                        <h3 class="text-lg font-bold text-slate-800 uppercase">Tipologia</h3>
                    </div>
                    <div class="h-40">
                        <canvas id="typeChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-2xl border border-slate-100 card-shadow">
                    <div class="flex items-center gap-2 mb-6">
                        <i data-lucide="shield-check" class="w-5 h-5 text-indigo-600"></i>
                        <h3 class="text-lg font-bold text-slate-800 uppercase">Justificação</h3>
                    </div>
                    <div class="space-y-6">
                        <div>
                            <div class="flex justify-between text-xs mb-2 uppercase font-black tracking-widest">
                                <span class="text-emerald-600">Justificadas</span>
                                <span id="valJust">-- dias</span>
                            </div>
                            <div class="w-full bg-slate-100 h-3 rounded-full"><div id="barJust" class="bg-emerald-500 h-full w-[0%] rounded-full transition-all duration-500"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs mb-2 uppercase font-black tracking-widest">
                                <span class="text-rose-500">Não Justificadas</span>
                                <span id="valNJust">-- dias</span>
                            </div>
                            <div class="w-full bg-slate-100 h-3 rounded-full"><div id="barNJust" class="bg-rose-500 h-full w-[0%] rounded-full transition-all duration-500"></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Participação por Modelo -->
        <div class="bg-[#f8fafc] p-8 rounded-[2.5rem] border border-slate-200 card-shadow w-full">
            <div class="flex flex-col md:flex-row gap-8 items-start">
                <div class="flex-1 w-full">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-3">
                            <div class="p-2 bg-white rounded-xl border border-slate-100 text-indigo-600 shadow-sm">
                                <i data-lucide="layers" class="w-5 h-5"></i>
                            </div>
                            <h3 class="text-xl font-black text-slate-900 uppercase tracking-tight">Participação por Modelo</h3>
                        </div>
                        <!-- Legenda do Gráfico de Modelos -->
                        <div class="flex gap-3">
                            <span class="flex items-center gap-1 text-[9px] font-bold text-slate-400 uppercase"><span class="w-2 h-0.5 bg-slate-300"></span> <span class="label-ano-comp-text">2024</span></span>
                            <span class="flex items-center gap-1 text-[9px] font-bold text-indigo-600 uppercase"><span class="w-2 h-0.5 bg-indigo-600"></span> <span class="label-ano-base-text">2025</span></span>
                        </div>
                    </div>
                    <div class="model-chart-container">
                        <canvas id="modelChart"></canvas>
                    </div>
                </div>
                
                <div class="w-full md:w-80 space-y-6 shrink-0">
                    <div class="bg-indigo-600/5 p-5 rounded-3xl border border-indigo-100 flex gap-4 items-start shadow-sm">
                        <div class="p-2 bg-indigo-600 rounded-xl shrink-0 shadow-lg shadow-indigo-100">
                            <i data-lucide="info" class="w-4 h-4 text-white"></i>
                        </div>
                        <div>
                            <h4 class="text-[11px] font-black text-indigo-900 uppercase tracking-[0.1em] mb-2">Impacto Operacional</h4>
                            <p id="modelImpactText" class="text-[11px] text-indigo-700/80 leading-relaxed font-medium">
                                Selecione um colaborador para ver o impacto nos modelos.
                            </p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-white p-3 rounded-2xl border border-slate-200/60 shadow-sm">
                            <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1">Modelo Líder</p>
                            <p id="leaderModel" class="text-sm font-black text-slate-800">--</p>
                        </div>
                        <div class="bg-white p-3 rounded-2xl border border-slate-200/60 shadow-sm">
                            <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1">Crescimento</p>
                            <p id="growthModel" class="text-sm font-black text-emerald-600">--%</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="max-w-7xl mx-auto mt-4 pt-8 border-t border-slate-200 flex flex-col md:flex-row justify-between items-center gap-4 text-slate-400 text-[10px] uppercase tracking-widest font-bold text-center">
        <div class="flex items-center gap-2 uppercase">
            <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
            Sistemas RH Inteligentes • v4.1
        </div>
        <span>Consolidado a <span id="footerDate">30 Jan 2026</span></span>
    </footer>

    <script>
        // --- DADOS DE TESTE COMPLETOS ---
        const COMPARISON_DATA = {
            geral: { pont: 97.5, assid: 93.8 },
            setores: {
                "SOLDADURA": { pont: 95.2, assid: 90.5 },
                "PÓS VENDA": { pont: 97.8, assid: 94.2 },
                "MONTAGEM": { pont: 98.5, assid: 95.1 },
                "ACABAMENTOS": { pont: 96.0, assid: 92.0 },
                "COMERCIAL": { pont: 98.0, assid: 96.5 },
                "COMPRAS": { pont: 97.0, assid: 94.0 },
                "ENGENHARIA": { pont: 99.0, assid: 97.0 },
                "FINANCEIRO": { pont: 98.5, assid: 96.0 },
                "IOT": { pont: 99.5, assid: 98.0 },
                "LOGÍSTICA": { pont: 94.5, assid: 91.0 },
                "QUALIDADE": { pont: 98.8, assid: 95.5 },
                "SERRALHARIA": { pont: 95.5, assid: 90.8 }
            },
            colaboradores: {
                "Abel dos Reis Tavares": {
                    pont: 94.2, assid: 88.5, faltas: 15, prodActual: 76, prodPrev: 80,
                    ferias: { 
                        gozadasBase: [1, 0, 0, 0, 5, 2, 7, 0, 0, 0, 0, 0], 
                        gozadasComp: [0, 2, 5, 0, 0, 10, 0, 0, 0, 0, 0, 0],
                        total: 22, bonus: 2 
                    },
                    tipologia: [10, 3, 2, 0], just: 13, njust: 2,
                    modelos: [10, 40, 20, 20, 10], 
                    modelosComp: [15, 35, 25, 15, 10],
                    leader: "MWS300", growth: "-4.2",
                    impacto: "Especialista em soldadura estrutural. Apresenta alta concentração no modelo MWS300."
                },
                "Ilídio Costa Ferreira": {
                    pont: 99.5, assid: 98.8, faltas: 1, prodActual: 95, prodPrev: 89,
                    ferias: { 
                        gozadasBase: [0, 0, 0, 2, 0, 0, 15, 0, 0, 0, 0, 0], 
                        gozadasComp: [0, 0, 0, 0, 5, 0, 10, 2, 0, 0, 0, 0],
                        total: 25, bonus: 3 
                    },
                    tipologia: [17, 0, 0, 0], just: 1, njust: 0,
                    modelos: [20, 20, 20, 20, 20], 
                    modelosComp: [18, 18, 22, 22, 20],
                    leader: "Polivalente", growth: "+6.8",
                    impacto: "Perfil de liderança técnica. Demonstra versatilidade total entre modelos."
                },
                "Octávio Ferreira da Silva": {
                    pont: 96.2, assid: 92.4, faltas: 10, prodActual: 84, prodPrev: 82,
                    ferias: { 
                        gozadasBase: [0, 5, 0, 0, 0, 10, 2, 3, 0, 0, 0, 0], 
                        gozadasComp: [0, 0, 0, 10, 5, 0, 0, 0, 0, 0, 0, 0],
                        total: 22, bonus: 1 
                    },
                    tipologia: [8, 1, 1, 0], just: 9, njust: 1,
                    modelos: [30, 25, 15, 20, 10], 
                    modelosComp: [25, 25, 20, 20, 10],
                    leader: "MWS200", growth: "+2.4",
                    impacto: "Focado na preparação inicial da série MWS200. Mantém consistência."
                },
                "Pedro Daniel Domingues Barreira": {
                    pont: 98.1, assid: 96.4, faltas: 5, prodActual: 88, prodPrev: 82,
                    ferias: { 
                        gozadasBase: [0, 2, 0, 0, 0, 10, 5, 0, 0, 0, 0, 0], 
                        gozadasComp: [0, 0, 0, 0, 0, 15, 5, 0, 0, 0, 0, 0],
                        total: 22, bonus: 1 
                    },
                    tipologia: [12, 3, 2, 0], just: 4, njust: 1,
                    modelos: [5, 15, 45, 20, 15], 
                    modelosComp: [10, 20, 40, 15, 15],
                    leader: "MWS500", growth: "+12.1",
                    impacto: "Excelente evolução técnica. Especializou-se nos modelos intermédios."
                },
                "Alexandre Miguel Silva Nunes das Neves": {
                    pont: 96.8, assid: 94.0, faltas: 8, prodActual: 82, prodPrev: 85,
                    ferias: { 
                        gozadasBase: [0, 0, 1, 1, 1, 1, 15, 0, 0, 0, 0, 0], 
                        gozadasComp: [0, 0, 0, 0, 0, 10, 10, 0, 0, 0, 0, 0],
                        total: 22, bonus: 0 
                    },
                    tipologia: [18, 0, 0, 0], just: 8, njust: 0,
                    modelos: [10, 10, 10, 30, 40], 
                    modelosComp: [12, 12, 12, 24, 40],
                    leader: "MWS715", growth: "-2.5",
                    impacto: "Referência no pós-venda para modelos pesados."
                },
                "Cândido Manuel dos Santos Veloso": {
                    pont: 97.4, assid: 95.2, faltas: 4, prodActual: 91, prodPrev: 88,
                    ferias: { 
                        gozadasBase: [0, 0, 0, 5, 5, 0, 10, 0, 0, 0, 0, 0], 
                        gozadasComp: [1, 1, 1, 1, 1, 10, 5, 0, 0, 0, 0, 0],
                        total: 24, bonus: 2 
                    },
                    tipologia: [15, 1, 0, 1], just: 4, njust: 0,
                    modelos: [15, 15, 25, 25, 20], 
                    modelosComp: [20, 20, 20, 20, 20],
                    leader: "MWS500", growth: "+3.4",
                    impacto: "Equilíbrio notável entre tempo de resposta e qualidade."
                },
                "Carina Andreia Rocha Robaina": {
                    pont: 99.2, assid: 97.8, faltas: 3, prodActual: 96, prodPrev: 92,
                    ferias: { 
                        gozadasBase: [0, 0, 2, 0, 0, 8, 12, 0, 0, 0, 0, 0], 
                        gozadasComp: [0, 0, 0, 0, 0, 10, 12, 0, 0, 0, 0, 0],
                        total: 22, bonus: 2 
                    },
                    tipologia: [20, 0, 1, 0], just: 3, njust: 0,
                    modelos: [10, 10, 20, 30, 30], 
                    modelosComp: [15, 15, 15, 25, 30],
                    leader: "MWS700", growth: "+4.3",
                    impacto: "Performance excepcional em suporte ao cliente."
                },
                "Carlos Miguel Tavares Almeida": {
                    pont: 95.5, assid: 91.0, faltas: 12, prodActual: 78, prodPrev: 81,
                    ferias: { 
                        gozadasBase: [1, 1, 1, 1, 1, 10, 5, 0, 0, 0, 0, 0], 
                        gozadasComp: [0, 0, 5, 0, 5, 10, 0, 0, 0, 0, 0],
                        total: 22, bonus: 0 
                    },
                    tipologia: [10, 5, 5, 0], just: 10, njust: 2,
                    modelos: [40, 30, 10, 10, 10], 
                    modelosComp: [35, 35, 10, 10, 10],
                    leader: "MWS200", growth: "-3.1",
                    impacto: "Focado na montagem rápida de componentes básicos."
                },
                "Diogo Miguel Fernandez Martins": {
                    pont: 98.4, assid: 96.8, faltas: 4, prodActual: 90, prodPrev: 84,
                    ferias: { 
                        gozadasBase: [0, 0, 0, 0, 0, 15, 7, 0, 0, 0, 0, 0], 
                        gozadasComp: [0, 0, 2, 2, 2, 10, 5, 0, 0, 0, 0, 0],
                        total: 22, bonus: 1 
                    },
                    tipologia: [20, 1, 0, 0], just: 4, njust: 0,
                    modelos: [20, 20, 30, 15, 15], 
                    modelosComp: [25, 25, 20, 15, 15],
                    leader: "MWS500", growth: "+7.1",
                    impacto: "Evolução constante na linha de montagem."
                },
                "Fábio da Rocha Silva": {
                    pont: 97.2, assid: 93.5, faltas: 7, prodActual: 86, prodPrev: 86,
                    ferias: { 
                        gozadasBase: [0, 0, 10, 0, 0, 0, 10, 2, 0, 0, 0, 0], 
                        gozadasComp: [0, 0, 5, 5, 5, 5, 0, 0, 0, 0, 0],
                        total: 23, bonus: 1 
                    },
                    tipologia: [18, 2, 1, 1], just: 7, njust: 0,
                    modelos: [15, 25, 20, 20, 20], 
                    modelosComp: [20, 20, 20, 20, 20],
                    leader: "MWS300", growth: "0.0",
                    impacto: "Pilar de estabilidade na produção industrial."
                }
            }
        };

        lucide.createIcons();
        let charts = {};

        function initCharts() {
            const chartConfig = { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } };
            
            charts.assid = new Chart(document.getElementById('assidChart').getContext('2d'), {
                type: 'line',
                data: { labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'], datasets: [{ label: 'Ano Base', data: [0,0,0,0,0,0], borderColor: '#4F46E5', borderWidth: 3, tension: 0.4 }, { label: 'Ano Comp', data: [0,0,0,0,0,0], borderColor: '#CBD5E1', borderDash:[5,5], tension: 0.4 }] },
                options: { ...chartConfig, scales: { y: { min: 70, max: 100 } } }
            });

            charts.pontu = new Chart(document.getElementById('pontuChart').getContext('2d'), {
                type: 'line',
                data: { labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'], datasets: [{ label: 'Ano Base', data: [0,0,0,0,0,0], borderColor: '#10B981', borderWidth: 3, tension: 0.4 }, { label: 'Ano Comp', data: [0,0,0,0,0,0], borderColor: '#CBD5E1', borderDash:[5,5], tension: 0.4 }] },
                options: { ...chartConfig, scales: { y: { min: 80, max: 100 } } }
            });

            charts.vacation = new Chart(document.getElementById('vacationLineChart').getContext('2d'), {
                type: 'line',
                data: { 
                    labels: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'], 
                    datasets: [
                        { label: 'Ano Base', data: [0,0,0,0,0,0,0,0,0,0,0,0], borderColor: '#4F46E5', fill: true, backgroundColor: 'rgba(79,70,229,0.05)', tension: 0.3 },
                        { label: 'Ano Comp', data: [0,0,0,0,0,0,0,0,0,0,0,0], borderColor: '#CBD5E1', borderDash: [5,5], fill: false, tension: 0.3 }
                    ] 
                },
                options: { ...chartConfig, scales: { y: { display: false }, x: { grid: { display: false } } } }
            });

            charts.type = new Chart(document.getElementById('typeChart'), {
                type: 'doughnut',
                data: { labels: ['Férias', 'Doença', 'Família', 'Outras'], datasets: [{ data: [1,1,1,1], backgroundColor: ['#4F46E5', '#F87171', '#FB923C', '#94A3B8'] }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right', labels: { boxWidth: 10, font: { size: 9 } } } } }
            });

            charts.prodAct = new Chart(document.getElementById('prodChart'), {
                type: 'doughnut',
                data: { datasets: [{ data: [0, 100], backgroundColor: ['#4F46E5', '#F1F5F9'] }] },
                options: { cutout: '75%', plugins: { legend: { display: false } } }
            });

            charts.prodPrv = new Chart(document.getElementById('prodChartPrev'), {
                type: 'doughnut',
                data: { datasets: [{ data: [0, 100], backgroundColor: ['#CBD5E1', '#F1F5F9'] }] },
                options: { cutout: '75%', plugins: { legend: { display: false } } }
            });

            charts.model = new Chart(document.getElementById('modelChart'), {
                type: 'bar',
                data: { 
                    labels: ['MWS200', 'MWS300', 'MWS500', 'MWS700', 'MWS715'], 
                    datasets: [
                        { label: 'Ano Base', data: [0,0,0,0,0], backgroundColor: '#4F46E5', borderRadius: 4 },
                        { label: 'Ano Comp', data: [0,0,0,0,0], backgroundColor: '#CBD5E1', borderRadius: 4 }
                    ] 
                },
                options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { max: 100, ticks: { font: { size: 9 } } } } }
            });
        }

        function updateDashboard() {
            const anoBase = document.getElementById('filterAnoBase').value;
            const anoComp = document.getElementById('filterAnoComp').value;
            const setorSel = document.getElementById('filterSetor').value;
            const colabSel = document.getElementById('filterColaborador').value;
            
            // Atualizar Rótulos Visuais
            document.querySelectorAll('.label-ano-base-text').forEach(el => el.innerText = anoBase);
            document.querySelectorAll('.label-ano-comp-text').forEach(el => el.innerText = anoComp);
            document.querySelectorAll('.label-ano-comp').forEach(el => el.innerText = `vs. ${anoComp}`);
            
            const referencial = (setorSel && COMPARISON_DATA.setores[setorSel]) 
                ? COMPARISON_DATA.setores[setorSel] 
                : COMPARISON_DATA.geral;
            
            const labelText = setorSel ? `vs. Média ${setorSel} (${anoComp})` : `vs. Média Geral (${anoComp})`;

            if (colabSel && COMPARISON_DATA.colaboradores[colabSel]) {
                const data = COMPARISON_DATA.colaboradores[colabSel];
                document.getElementById('selectionHighlight').classList.remove('hidden');
                document.getElementById('highlightName').innerText = colabSel;
                
                const group = document.getElementById('filterColaborador').options[document.getElementById('filterColaborador').selectedIndex]?.closest('optgroup');
                document.getElementById('highlightSetorTag').innerText = group ? group.label : "---";
                
                document.getElementById('valPontDestaque').innerText = data.pont + "%";
                document.getElementById('valAssidDestaque').innerText = data.assid + "%";
                document.getElementById('kpiPontValue').innerText = data.pont + "%";
                document.getElementById('kpiAssidValue').innerText = data.assid + "%";
                document.getElementById('kpiFaltasValue').innerText = data.faltas + " dias";

                const dP = (data.pont - referencial.pont).toFixed(1);
                const dA = (data.assid - referencial.assid).toFixed(1);
                
                const diffP = document.getElementById('diffPontDestaque');
                diffP.innerHTML = `<i data-lucide="${dP >= 0 ? 'trending-up' : 'trending-down'}" class="w-2.5 h-2.5"></i> ${dP >= 0 ? '+' : ''}${dP}%`;
                diffP.className = `text-[9px] font-bold flex items-center gap-0.5 ${dP >= 0 ? 'text-emerald-400' : 'text-rose-400'}`;
                
                const diffA = document.getElementById('diffAssidDestaque');
                diffA.innerHTML = `<i data-lucide="${dA >= 0 ? 'trending-up' : 'trending-down'}" class="w-2.5 h-2.5"></i> ${dA >= 0 ? '+' : ''}${dA}%`;
                diffA.className = `text-[9px] font-bold flex items-center gap-0.5 ${dA >= 0 ? 'text-emerald-400' : 'text-rose-400'}`;
                
                document.getElementById('labelComparePont').innerText = labelText;
                document.getElementById('labelCompareAssid').innerText = labelText;

                const gozados = data.ferias.gozadasBase.reduce((a,b)=>a+b, 0);
                document.getElementById('vacationTotal').innerText = data.ferias.total;
                const perc = Math.round((gozados / data.ferias.total) * 100);
                document.getElementById('vacationPercentLabel').innerText = perc + "%";
                document.getElementById('vacationBar').style.width = perc + "%";
                document.getElementById('vacationPending').innerText = data.ferias.total - gozados;
                document.getElementById('vacationBonus').innerText = "+" + data.ferias.bonus;
                document.getElementById('prodCurrentVal').innerText = data.prodActual + "%";
                document.getElementById('prodPrevVal').innerText = data.prodPrev + "%";

                document.getElementById('valJust').innerText = data.just + " dias";
                document.getElementById('valNJust').innerText = data.njust + " dias";
                const totalJ = data.just + data.njust || 1;
                document.getElementById('barJust').style.width = ((data.just / totalJ) * 100) + "%";
                document.getElementById('barNJust').style.width = ((data.njust / totalJ) * 100) + "%";

                document.getElementById('leaderModel').innerText = data.leader;
                const growthEl = document.getElementById('growthModel');
                growthEl.innerText = (parseFloat(data.growth) > 0 ? "+" : "") + data.growth + "%";
                growthEl.className = `text-sm font-black ${parseFloat(data.growth) >= 0 ? 'text-emerald-600' : 'text-rose-600'}`;
                document.getElementById('modelImpactText').innerText = data.impacto;

                // Atualizar gráficos de Assiduidade e Pontualidade com dados de comparação simulados
                charts.assid.data.datasets[0].label = `Ano Base (${anoBase})`;
                charts.assid.data.datasets[0].data = [data.assid-1, data.assid+1, data.assid, data.assid-2, data.assid-1, data.assid];
                charts.assid.data.datasets[1].label = `Ano Comp (${anoComp})`;
                charts.assid.data.datasets[1].data = [referencial.assid-1, referencial.assid, referencial.assid+1, referencial.assid-1, referencial.assid, referencial.assid-0.5];
                charts.assid.update();

                charts.pontu.data.datasets[0].label = `Ano Base (${anoBase})`;
                charts.pontu.data.datasets[0].data = [data.pont-0.5, data.pont, data.pont+0.5, data.pont, data.pont-0.2, data.pont];
                charts.pontu.data.datasets[1].label = `Ano Comp (${anoComp})`;
                charts.pontu.data.datasets[1].data = [referencial.pont-0.5, referencial.pont+0.5, referencial.pont, referencial.pont-0.5, referencial.pont+0.2, referencial.pont];
                charts.pontu.update();
                
                // Atualizar gráfico de Férias
                charts.vacation.data.datasets[0].label = `Ano Base (${anoBase})`;
                charts.vacation.data.datasets[0].data = data.ferias.gozadasBase;
                charts.vacation.data.datasets[1].label = `Ano Comp (${anoComp})`;
                charts.vacation.data.datasets[1].data = data.ferias.gozadasComp;
                charts.vacation.update();

                charts.type.data.datasets[0].data = data.tipologia;
                charts.type.update();
                charts.prodAct.data.datasets[0].data = [data.prodActual, 100-data.prodActual];
                charts.prodAct.update();
                charts.prodPrv.data.datasets[0].data = [data.prodPrev, 100-data.prodPrev];
                charts.prodPrv.update();

                // Atualizar gráfico de Participação por Modelo
                charts.model.data.datasets[0].label = `Ano Base (${anoBase})`;
                charts.model.data.datasets[0].data = data.modelos;
                charts.model.data.datasets[1].label = `Ano Comp (${anoComp})`;
                charts.model.data.datasets[1].data = data.modelosComp;
                charts.model.update();

            } else {
                document.getElementById('selectionHighlight').classList.add('hidden');
                document.getElementById('kpiPontValue').innerText = referencial.pont + "%";
                document.getElementById('kpiAssidValue').innerText = referencial.assid + "%";
                document.getElementById('kpiFaltasValue').innerText = "-- dias";
                
                Object.values(charts).forEach(chart => {
                    if (chart.config.type === 'line' || chart.config.type === 'bar') {
                        chart.data.datasets.forEach(ds => ds.data = ds.data.map(() => 0));
                    } else {
                        chart.data.datasets[0].data = [0, 100];
                    }
                    chart.update();
                });
            }
            lucide.createIcons();
        }

        document.getElementById('filterAnoBase').addEventListener('change', updateDashboard);
        document.getElementById('filterAnoComp').addEventListener('change', updateDashboard);
        document.getElementById('filterSetor').addEventListener('change', updateDashboard);
        document.getElementById('filterColaborador').addEventListener('change', updateDashboard);
        document.getElementById('btnReset').addEventListener('click', () => {
            document.getElementById('filterAnoBase').value = "2025";
            document.getElementById('filterAnoComp').value = "2024";
            document.getElementById('filterSetor').value = "";
            document.getElementById('filterColaborador').value = "";
            updateDashboard();
        });

        window.onload = () => {
            initCharts();
            updateDashboard();
        };
    </script>
</body>
</html>